# Яндекс поиск
___
## Содержание
1. [Тема и целевая аудитория](#1-тема-и-целевая-аудитория)
2. [](#2-расчет-нагрузки)
___
## 1. Тема и целевая аудитория

Яндекс поиск - поисковая система

### Функционал MVP:

- Составление поисковых запросов
- Запоминание истории поиска
- Подсказки при поиске
- Поддержка ошибчного ввода

### Целевая аудитория

Так как яндекс имеет несколько доменов, для полной статиски соберу информацию в таблицу.

|   Домен    |  DAU  |  MAU   | Visit duration | Pages per Visit | Bounce Rate |
|:----------:|:-----:|:------:|:--------------:|:---------------:|:-----------:|
| yandex.ru  | 91.5M |  2.8B  |      8:34      |      8.36       |   27.05%    |
| yandex.com | 5.1M  | 155.1M |      5:29      |      6.81       |   34.75%    |
| yandex.by  | 3.9M  | 119.7M |      9:47      |      10.13      |   19.89%    |
| yandex.kz  | 2.2M  | 67.2M  |      8:03      |      8.98       |   20.26%    |

### Распределение аудитории
![](images/map.png)

*Данные взяты с сайта [hypestat](https://hypestat.com/)*
___
## 2. Расчет нагрузки

### Продуктовые метрики

* DAU - 102,7 млн / MAU - 2,35 млрд.
* Кол-во посковых запросов в месяц ~25 млрд.
* Кол-во активных пользователей ~100 млн. чел.
* Кол-во проиндексированных страниц ~10 млрд.
 
### Объем хранимых данных


| Данные               | Размер ед. | Кол-во на 1 пользователя | Суммарный объем |
|----------------------|------------|--------------------------|-----------------|
| Профиль пользователя | 5 Кб       | 1                        | 500 Гб          |
| История поиска       | 40 б       | 750                      | 3 Тб            |

Также надо учитывать объем проиндексированных страниц, если принять за средний объем 1 индекса 10 Мб, то суммарно выйдет ``` 10 * 10^9 * 10 * 10^6 = 10^17 б = 100 Петабайт ```

Сумарный объем хранимых данных ~100 Петабайт, причем почти все место занимают поисковые индексы.

### RPS

| Действие          | Ср. кол-во на пользователя в день | RPS  |
|-------------------|-----------------------------------|------|
| Регистрация       | 0.1                               | 118  |
| Авторизация       | 0.5                               | 594  |
| Домашняя страница | 5                                 | 5943 |
| Поисковый запрос  | 8                                 | 9509 |

Среднее кол-во запросов от пользователя в день - 13.6

Средний RPS в течении дня - 16164, заложим пиковую нагрузку * 3 и получим пиковый RPS = 48492

### Сетевой трафик

| Действие          | Ср. трафик на 1 действие | Нагрузка на сеть |
|-------------------|--------------------------|------------------|
| Регистрация       | 250 Кб                   | 0.22 Гбит/с      |
| Авторизация       | 30 Кб                    | 0.13 Гбит/с      |
| Домашняя страница | 257 Кб                   | 11,6 Гбит/с      |
| Поисковый запрос  | 153 Кб                   | 11,09 Гбит/с     |

Сумарная нагрузка на сеть - 23.04 Гбит/с
Пиковая нагрузка - 69.12 Гбит/с